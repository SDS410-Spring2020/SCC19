---
title: "jeny_workspace"
author: "Jeny Kwon"
date: "4/11/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(rvest)
library(pdftools)
library(dplyr)
library(glue)
library(RCurl) 
library(pander)
library(data.table)
```

```{r}
url <- read_html("https://www.smith.edu/president-kathleen-mccartney/letters-community")

links <- url %>% 
  html_nodes(".field-item") %>%   
  html_nodes("li") %>% 
  html_nodes("a") %>% 
  html_attr("href")
```

```{r}
  
links_clean <- links %>% 
  str_replace("https://www.smith.edu", "") 
  
```

```{r}
years = c("2019-20", "2018-19", "2017-18")

links_years <- links_clean[!links_clean %in% grep(paste0(years, collapse = "|"), links_clean, value = T, invert = T)]

```

```{r}
links_url <- paste("https://www.smith.edu", links_years,  sep="")

```

```{r}
url.exists(links_url)
```


```{r}
links_actual <- links_url[url.exists(links_url)]
```

```{r}
url <- "https://www.smith.edu/president-kathleen-mccartney/letters/2019-20/april-10-2020"


title <- read_html(url) %>% 
  html_node(".page-title") %>% 
  html_text()

title
```

```{r}
url <- "https://www.smith.edu/president-kathleen-mccartney/letters/2019-20/april-10-2020"


text <- read_html(url) %>% 
  html_node(".left-column-text") %>% 
  html_node(".field-item.even") %>% 
  html_text()

text
```

```{r}
links_sample <- c("https://www.smith.edu/president-kathleen-mccartney/letters/2017-18/innovation-challenge", "https://www.smith.edu/president-kathleen-mccartney/letters/2019-20/april-10-2020")

title <- lapply(links_sample,
              function(links_sample) {
                links_sample %>% read_html() %>%
                html_node(".page-title") %>%
                html_text()
              }
)

content <- lapply(links_sample,
              function(links_sample) {
                links_sample %>% read_html() %>%
                html_node(".left-column-text") %>%
                html_node(".field-item.even") %>%
                html_text()
              }
)

df <- as.data.frame(cbind(title, content))

pander(df)


```










